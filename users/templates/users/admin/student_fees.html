{% extends 'users/admin/base.html' %}

{% block content %}
<div class="container mt-5">
    <h1>List Students Payments</h1>

    <div class="row mb-3">
        <div class="col-md-4">
            <strong>Total Fees: Rs. {{ students|length }}</strong> <!-- Customize this to display correct total fees -->
        </div>
        <div class="col-md-4">
            <strong>Paid Fees: Rs. 10000</strong> <!-- Placeholder, update with correct logic -->
        </div>
        <div class="col-md-4">
            <strong>Balance Fees: Rs. 5000</strong> <!-- Placeholder, update with correct logic -->
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <label>Show 
                <select>
                    <option>10</option>
                    <option>25</option>
                    <option>50</option>
                    <option>100</option>
                </select>
                entries
            </label>
        </div>
        <div class="col-md-6">
            <form method="GET">
                <div class="input-group">
                    <input type="text" name="search" class="form-control" placeholder="Search" value="{{ request.GET.search }}">
                    <button class="btn btn-outline-secondary" type="submit">Search</button>
                </div>
            </form>
        </div>
    </div>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>Student Name</th>
                <th>Course Name</th>
                <th>Total Course Fees</th>
                <th>Fees Paid</th>
                <th>Fees Balance</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ student.full_name }}</td>
                    <td>{{ student.course_of_interest }}</td>
                    <td>Rs. {{ student.total_fees }}</td>
                    <td>Rs. {{ student.fees_received }}</td>
                    <td>Rs. {{ student.balance }}</td>
                    <td>
                        
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7">No students found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination controls -->
    <nav>
        <ul class="pagination">
            {% if students.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1">&laquo; First</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ students.previous_page_number }}">Previous</a>
                </li>
            {% endif %}

            <li class="page-item disabled">
                <span class="page-link">Page {{ students.number }} of {{ students.paginator.num_pages }}</span>
            </li>

            {% if students.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ students.next_page_number }}">Next</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ students.paginator.num_pages }}">Last &raquo;</a>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>

{% endblock %}
