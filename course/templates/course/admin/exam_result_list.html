{% extends 'users/admin/base.html' %}

{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Results List</title>
    <style>
        /* Basic styling to match the given example */
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px; text-align: center; border: 1px solid #ddd; }
        th { background-color: #f2f2f2; }
        img { width: 50px; height: auto; }
        .action-buttons button { margin: 0 5px; }
    </style>
</head>
<body>
    <h1>Exam Results List</h1>

    <!-- Filter Form -->
    <form method="post" action="">
        {% csrf_token %}
        <label for="grade">Filter by Grade:</label>
        <select name="grade" id="grade">
            <option value="">All</option>
            <option value="A+">A+</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="C">C</option>
            <option value="D">D</option>
            <option value="E">E</option>
        </select>
        <button type="submit">Filter</button>
    </form>

    <!-- Results Table -->
    <table>
        <thead>
            <tr>
                <th>Sr.</th>
                <th>Photo</th>
                <th>Student Name</th>
                <th>Course Name</th>
                <th>Theory Mark</th>
                <th>Practical Mark</th>
                <th>Percentage</th>
                <th>Grade</th>
                <th>Result</th>
                <th>Created On</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for result in exam_results %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td><img src="{{ result.student.photo.url }}" alt="Photo of {{ result.student.name }}"></td>
                <td>{{ result.student.name }}</td>
                <td>{{ result.student.course_name }}</td>
                <td>{{ result.theory_mark }}</td>
                <td>{{ result.practical_mark }}</td>
                <td>{{ result.percentage }}%</td>
                <td>{{ result.grade }}</td>
                <td>{{ result.result|title }}</td>
                <td>{{ result.created_on|date:"M d, Y" }}</td>
                <td class="action-buttons">
                    <a href="{% url 'add_result' result.id %}"><button>Add Result</button></a>
                    <a href="{% url 'update_result' result.id %}"><button>Update Result</button></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>

{% endblock content %}